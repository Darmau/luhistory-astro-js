---
import {sanityClient} from "sanity:client";
import Layout from "../../../layouts/Layout.astro";
import PageTitle from "../../../components/PageTitle.astro";
export async function getStaticPaths() {
  const data = await sanityClient.fetch(`*[_type == 'article' && defined(slug) && defined(publishDate) && defined(category)] | order(publishDate desc) {
    title,
    publishDate,
    category,
    "slug": slug.current,
  }`);
  const paths = data.map((article) => {
    return {
      params: {
        slug: article.slug
      },
      props: {
        title: article.title,
        publishDate: article.publishDate,
      }
    }
  });
  return paths;
}

const {title, publishDate} = Astro.props;
---

<Layout>
  <PageTitle title={title} />
  <p>{publishDate}</p>
</Layout>
