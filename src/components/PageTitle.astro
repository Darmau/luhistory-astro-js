---
const {title, subtitle, bgWhite = true} = Astro.props;
// 根据title的长度，返回一个4-9之间的数字
function getTextSize(size) {
  if (size < 20) {
    return 9;
  } else if (size < 40) {
    return 8;
  } else if (size < 60) {
    return 7;
  } else {
    return 6;
  }
}

const titleSize = getTextSize(title.length);
---

<!--TODO 根据文本长度不同，调整字号-->
<header>
  {bgWhite === true ?
    <hgroup class = "w-full max-w-8xl mx-auto grid grid-cols-12 px-8 z-10 py-24">
      <h1
        class = {`col-start-4 col-end-12 font-serif font-bold text-neutral-900 text-${titleSize}xl leading-snug`}
      >{title}</h1>
      {subtitle &&
        <h2
          class = "col-start-4 col-end-12 font-serif font-semibold text-2xl text-neutral-900 my-8"
        >{subtitle}</h2>
      }
    </hgroup>
      :
    <hgroup class = "bg-img">
      <div class = "w-full max-w-8xl mx-auto grid grid-cols-12 px-8 z-10">
        <h1
          class = {`col-start-4 col-end-12 font-serif font-bold text-neutral-900 text-${titleSize}xl leading-snug`}
        >{title}</h1>
        {subtitle &&
          <h2
            class = "col-start-4 col-end-12 font-serif font-semibold text-2xl text-white my-8"
          >{subtitle}</h2>
        }
      </div>
      <div class = "overlay"></div>
    </hgroup>
  }
</header>

<style>
  .bg-img {
    background-image: url('/src/assets/images/cover.jpg');
    width: 100vw;
    height: 800px;
    margin-top: -104px;
    display: flex;
    align-items: center;
    position: relative;
  }

  .overlay {
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.35);
    position: absolute;
    top: 0;
    z-index: 1;
  }
</style>
